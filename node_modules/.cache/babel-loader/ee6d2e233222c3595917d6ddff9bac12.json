{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\om\\\\desktop\\\\Instagram-clone\\\\src\\\\components\\\\VideoSidebar\\\\VideoSidebar.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\nimport MessageIcon from \"@material-ui/icons/Message\";\nimport { useStyles } from './styles';\nimport { useStateValue } from \"../../context/StateProvider\";\nimport { database } from \"../../firebase/firebase.utils\";\nimport { Typography } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction VideoSidebar(props) {\n  _s();\n\n  const {\n    state: {\n      user\n    }\n  } = useStateValue();\n  const [liked, setLiked] = useState(() => {\n    if (props.likes.includes(user.userId)) {\n      return true;\n    }\n\n    return false;\n  });\n  const classes = useStyles();\n\n  const handleLike = async () => {\n    console.log(\"handle like\");\n\n    if (props.likes.includes(user.userId)) {\n      let likeArr = props.likes.filter(id => id !== user.userId);\n      await database.posts.doc(props.pid).update({\n        likes: likeArr\n      });\n    } else {\n      await database.posts.doc(props.pid).update({\n        likes: [...props.likes, user.userId]\n      });\n\n      if (user.userId !== props.userId) {\n        await database.notifications.add({\n          sender: user.userId,\n          recipient: props.userId,\n          createdAt: database.getUserTimeStamp(),\n          type: \"like\",\n          read: false,\n          postId: props.pid\n        });\n      }\n    }\n\n    setLiked(preState => {\n      return !preState;\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.videoSidebar,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.button,\n      children: liked ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(FavoriteIcon, {\n          fontSize: \"large\",\n          onClick: handleLike\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          component: \"p\",\n          children: props.likes.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(FavoriteBorderIcon, {\n          fontSize: \"large\",\n          onClick: handleLike\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          component: \"p\",\n          children: props.likes.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.button,\n      children: [/*#__PURE__*/_jsxDEV(MessageIcon, {\n        fontSize: \"large\",\n        onClick: props.sendDateToOverlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        component: \"p\",\n        children: props.comments.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.button,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: classes.record,\n        src: \"https://static.thenounproject.com/png/934821-200.png\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n\n_s(VideoSidebar, \"JjJQj8DoU6Fbg/gnPG4Fv0RcP9E=\", false, function () {\n  return [useStateValue, useStyles];\n});\n\n_c = VideoSidebar;\nexport default VideoSidebar;\n\nvar _c;\n\n$RefreshReg$(_c, \"VideoSidebar\");","map":{"version":3,"sources":["C:/Users/om/desktop/Instagram-clone/src/components/VideoSidebar/VideoSidebar.jsx"],"names":["React","useState","FavoriteIcon","FavoriteBorderIcon","MessageIcon","useStyles","useStateValue","database","Typography","VideoSidebar","props","state","user","liked","setLiked","likes","includes","userId","classes","handleLike","console","log","likeArr","filter","id","posts","doc","pid","update","notifications","add","sender","recipient","createdAt","getUserTimeStamp","type","read","postId","preState","videoSidebar","button","length","sendDateToOverlay","comments","record"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\r\nimport MessageIcon from \"@material-ui/icons/Message\";\r\nimport { useStyles } from './styles';\r\nimport { useStateValue } from \"../../context/StateProvider\";\r\nimport { database } from \"../../firebase/firebase.utils\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nfunction VideoSidebar(props) {\r\n  const { state: { user } } = useStateValue()\r\n  const [liked, setLiked] = useState(() => {\r\n    if(props.likes.includes(user.userId)){\r\n        return true;\r\n    }\r\n    return false;\r\n  });\r\n  const classes = useStyles();\r\n\r\n  const handleLike = async () => {\r\n    console.log(\"handle like\")\r\n    if(props.likes.includes(user.userId)){\r\n        let likeArr = props.likes.filter(id => id !== user.userId)\r\n        await database.posts.doc(props.pid).update({\r\n          likes: likeArr\r\n        })\r\n    }else{\r\n      await database.posts.doc(props.pid).update({\r\n          likes: [...props.likes, user.userId]\r\n      })\r\n      if(user.userId !== props.userId){\r\n        await database.notifications.add({\r\n          sender: user.userId,\r\n          recipient: props.userId,\r\n          createdAt: database.getUserTimeStamp(),\r\n          type: \"like\",\r\n          read: false,\r\n          postId: props.pid\r\n        })\r\n      }\r\n    }\r\n    setLiked((preState) => {\r\n      return !preState\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className={classes.videoSidebar}>\r\n      <div className={classes.button}>\r\n        {liked ? (\r\n          <div>\r\n            <FavoriteIcon fontSize=\"large\" onClick={handleLike} />\r\n            <Typography variant=\"body2\" component=\"p\">\r\n              {props.likes.length}\r\n            </Typography>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <FavoriteBorderIcon\r\n              fontSize=\"large\"\r\n              onClick={handleLike}\r\n            />\r\n            <Typography variant=\"body2\" component=\"p\">\r\n              {props.likes.length}\r\n            </Typography>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className={classes.button}>\r\n        <MessageIcon fontSize=\"large\" onClick={props.sendDateToOverlay} />\r\n        <Typography variant=\"body2\" component=\"p\">\r\n          {props.comments.length}\r\n        </Typography>\r\n      </div>\r\n      <div className={classes.button}>\r\n          <img\r\n            className={classes.record}\r\n            src=\"https://static.thenounproject.com/png/934821-200.png\"\r\n            alt=\"\"\r\n          />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VideoSidebar;"]},"metadata":{},"sourceType":"module"}